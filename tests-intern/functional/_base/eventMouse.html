<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
	<title>mouse events test</title>
	<style type="text/css">
		@import "../../resources/dojo.css";

		div {
			margin: 10px;
			padding: 10px;
			border: medium inset gray;
		}

		/* highlight on hover so it's clear where robot has moved the mouse */
		div, h1 {
			background-color: white;
     	}
		div:hover, h1:hover {
			background-color: cyan;
		}

		/* apply width to top level nodes, not using body > * since it doesn't work on IE6 */
		.top {
			width: 500px;
		}
	</style>
	
	<script type="text/javascript" djConfig="isDebug: true" src="../../../dojo.js"></script>
	<script type="text/javascript">
		var ready = false;
		dojo.addOnLoad(function () {
            
			dojo.connect(dojo.byId('outer'), 'onmouseenter', function (evt) {
                var targetId = evt.target.id;

                dojo.byId('event-target-input').value = 'mouseenter_' + targetId;
            });
			dojo.connect(dojo.byId('outer'), 'onmouseleave', function (evt) {
                var targetId = evt.target.id;
                dojo.byId('event-target-input').value = 'mouseleave_' + targetId;
			});

			handles = dojo.map(['outer', 'middle', 'inner1', 'inner2'], function (id) {
				var node = dojo.byId(id);
				return [
					dojo.connect(node, 'onclick', function(evt){
                        var targetId = evt.target.id,
                            currentTargetId = evt.currentTarget.id;

						dojo.byId('event-target-input').value = 'onclick_' + targetId;
                        dojo.byId('event-current-target-input').value = 'onclick_' + currentTargetId;

						if (evt.currentTarget.id == 'middle' || evt.currentTarget.id == 'outer') {
							dojo.stopEvent(evt);
						}
					}),						/*

					dojo.connect(node, "onclick", function(evt){
						// repeated click event just to make sure that 2 events work
						clickEvents.push({
							target: evt.target.id,
							currentTarget: evt.currentTarget.id,
							event: "click"
						});
						console.log("repeated click event: " + dojo.toJson(clickEvents[clickEvents.length-1]));
						if(evt.currentTarget.id == "middle" || evt.currentTarget.id == "outer"){
							dojo.stopEvent(evt);
						}
					}),
					*/
					dojo.connect(node, 'onmousedown', function (evt) {
                        var targetId = evt.target.id;
                        dojo.byId('event-target-input').value = 'onclick_' + targetId;
						if (evt.currentTarget.id == 'middle' || evt.currentTarget.id == 'outer') {
							dojo.stopEvent(evt);
						}
					})
				];
			});

			ready = true;
		});
	</script>
</head>
<body>
	<h1 id="header" class="top">mouse events test</h1>

	<div id="outer" class="top">
		<span id="outerLabel">outer</span>
		<div id="middle">
			<span id="middleLabel">middle</span>
			<div id="inner1">inner 1</div>
			<div id="labelBetweenInners">between inner 1 and inner 2</div>
			<div id="inner2">inner 2</div>
		</div>
	</div>

	<div id="afterOuter" class="top">after outer</div>
    <input id="event-target-input">
    <input id="event-current-target-input">
</body>
</html>
